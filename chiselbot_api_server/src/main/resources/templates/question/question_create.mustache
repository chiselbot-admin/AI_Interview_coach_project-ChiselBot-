{{> layout/header }}
<body id="page-top">
<div id="wrapper">
    {{> layout/sidebar }}
    <div id="content-wrapper" class="d-flex flex-column">
        <div id="content">
            {{> layout/topbar }}
            <!-- 레이아웃 작업 부분 -->
            <div class="container mt-5">
                <h2 class="mb-4 text-center fw-bold">면접 질문 등록</h2>

                <div class="form-container">
                    <form action="/admin/questions/create" method="post">

                        <!-- 카테고리 선택 -->
                        <div class="mb-3">
                            <label class="form-label">카테고리</label>
                            <select class="form-select" name="categoryId" required>
                                <option value="" selected disabled hidden>카테고리를 선택하세요</option>
                                {{#categories}}
                                    <option value="{{categoryId}}">{{name}}</option>
                                {{/categories}}
                            </select>
                        </div>

                        <!-- 레벨 선택 -->
                        <div class="mb-3">
                            <label class="form-label">난이도(Level)</label>
                            <select class="form-select" name="interviewLevel" id="interviewLevel" required>
                                <option value="" selected disabled hidden>레벨을 선택하세요</option>
                                {{#levels}}
                                    <option value="{{.}}">{{.}}</option>
                                {{/levels}}
                            </select>
                        </div>

                        <!-- 질문 내용 -->
                        <div class="mb-3">
                            <label class="form-label">질문 내용</label>
                            <textarea class="form-control" name="questionText" rows="3" required></textarea>
                        </div>

                        <!-- Intent -->
                        <div class="mb-3" id="intentGroup">
                            <label class="form-label">의도(Intent)</label>
                            <textarea class="form-control" name="intentText" rows="2"></textarea>
                        </div>

                        <!-- Point -->
                        <div class="mb-3" id="pointGroup">
                            <label class="form-label">핵심 포인트(Point)</label>
                            <textarea class="form-control" name="pointText" rows="2"></textarea>
                        </div>

                        <!-- 답변 (Level1 전용) -->
                        <div class="mb-3 hidden" id="answerGroup">
                            <label class="form-label">모범 답변</label>
                            <textarea class="form-control" name="answerText" rows="3"></textarea>
                        </div>

                        <!-- 등록 버튼 -->
                        <div class="text-center mt-4">
                            <button type="submit" class="btn btn-primary px-5">등록하기</button>
                            <a href="/admin/questions" class="btn btn-secondary ms-2">목록으로</a>
                        </div>

                    </form>
                </div>
            </div>
        </div>
        {{> layout/footer }}
    </div>
</div>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

<style>
    body { background-color: #f8f9fa; }
    .form-container {
        background: white;
        border-radius: 8px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        padding: 30px;
        margin-top: 40px;
    }
    .form-label { font-weight: 600; }
    .hidden { display: none; }

    textarea.form-control { resize: none; }
</style>

<!-- Level 선택 시 폼 변경 JS -->
<script>
    document.addEventListener("DOMContentLoaded", function () {
        const levelSelect = document.getElementById("interviewLevel");
        const intentGroup = document.getElementById("intentGroup");
        const pointGroup = document.getElementById("pointGroup");
        const answerGroup = document.getElementById("answerGroup");

        levelSelect.addEventListener("change", function () {
            const value = levelSelect.value;

            if (value === "LEVEL_1") {
                // Level1 → answer 활성화 / intent, point 비활성화
                intentGroup.classList.add("hidden");
                pointGroup.classList.add("hidden");
                answerGroup.classList.remove("hidden");
            } else if (value) {
                // 다른 레벨 → intent, point 활성화 / answer 비활성화
                intentGroup.classList.remove("hidden");
                pointGroup.classList.remove("hidden");
                answerGroup.classList.add("hidden");
            } else {
                // 아무 것도 선택 안 했을 때
                intentGroup.classList.remove("hidden");
                pointGroup.classList.remove("hidden");
                answerGroup.classList.add("hidden");
            }
        });
    });
</script>

</body>
</html>
